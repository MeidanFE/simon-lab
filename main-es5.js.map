{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/config/config.module.ts","webpack:///src/app/config/default-config.service.ts","webpack:///src/app/icons-provider.module.ts","webpack:///src/app/pages/face-detection/face-detection.component.html","webpack:///src/app/pages/face-detection/face-detection.component.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts","webpack:///crypto (ignored)","webpack:///node-fetch (ignored)","webpack:///util (ignored)"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","routes","path","pathMatch","redirectTo","component","AppRoutingModule","forRoot","declarations","imports","AppComponent","isCollapsed","selector","templateUrl","styleUrls","antDesignIcons","icons","Object","map","key","AppModule","provide","useValue","providers","bootstrap","ConfigModule","DefaultConfigService","providedIn","IconsProviderModule","FaceDetectionComponent","fb","el","defaultConfig","http","message","beforeUpload","file","blob2Base64","previewUrl","updateResults","MODELS_DIR","faceDetector","ssdMobilenetv1","load","minConfidence","tinyFaceDetector","inputSize","scoreThreshold","inputImgEl","nativeElement","querySelector","canvas","DEFAULT_FACE_DETECTOR","DEFAULT_INPUT_SIZE","DEFAULT_MIN_CONFIDENCE","validateForm","group","imageUrl","create","getImageFromOrigin","getCurrentFaceDetector","results","drawDetections","url","get","responseType","toPromise","result","patchValue","value","submitForm","blob","reject","reader","FileReader","readAsDataURL","onload","onerror","environment","production","err","console","error"],"mappings":";;;;;;;;;;;;;;;;;AAAA,aAASA,wBAAT,CAAkCC,GAAlC,EAAuC;AACtC;AACA;AACA,aAAOC,OAAO,CAACC,OAAR,GAAkBC,IAAlB,CAAuB,YAAW;AACxC,YAAIC,CAAC,GAAG,IAAIC,KAAJ,CAAU,yBAAyBL,GAAzB,GAA+B,GAAzC,CAAR;AACAI,SAAC,CAACE,IAAF,GAAS,kBAAT;AACA,cAAMF,CAAN;AACA,OAJM,CAAP;AAKA;;AACDL,4BAAwB,CAACQ,IAAzB,GAAgC,YAAW;AAAE,aAAO,EAAP;AAAY,KAAzD;;AACAR,4BAAwB,CAACG,OAAzB,GAAmCH,wBAAnC;AACAS,UAAM,CAACC,OAAP,GAAiBV,wBAAjB;AACAA,4BAAwB,CAACW,EAAzB,GAA8B,yCAA9B;;;;;;;;;;;;;;;;ACZA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAmBA,QAAMC,MAAM,GAAW,CACrB;AAAEC,UAAI,EAAE,EAAR;AAAYC,eAAS,EAAE,MAAvB;AAA+BC,gBAAU,EAAE;AAA3C,KADqB,EAErB;AACEF,UAAI,EAAE,gBADR;AAEEG,eAAS,EAAE;AAFb,KAFqB,CAAvB;;QA2BaC,gB;;;;;YAAAA;;;;yBAAAA,gB;AAAgB,O;AAAA,gBAjBlB,CACP,6DAAaC,OAAb,CAAqBN,MAArB,CADO,EAEP,4DAFO,EAGP,kEAHO,EAIP,2EAJO,EAMP,iEANO,EAOP,mEAPO,EAQP,+DARO,EASP,mEATO,EAUP,iEAVO,EAWP,mEAXO,EAYP,+EAZO,EAaP,sEAbO,CAiBkB,EAFjB,4DAEiB;;;;0HAAhBK,gB,EAAgB;AAAA,uBAlBZ,sGAkBY;AAlBU,gFAGnC,4DAHmC,EAInC,kEAJmC,EAKnC,2EALmC,EAOnC,iEAPmC,EAQnC,mEARmC,EASnC,+DATmC,EAUnC,mEAVmC,EAWnC,iEAXmC,EAYnC,mEAZmC,EAanC,+EAbmC,EAcnC,sEAdmC,CAkBV;AAJV,kBAEP,4DAFO;AAIU,O;AAFL,K;;;;;sEAEXA,gB,EAAgB;cAnB5B,sDAmB4B;eAnBnB;AACRE,sBAAY,EAAE,CAAC,sGAAD,CADN;AAERC,iBAAO,EAAE,CACP,6DAAaF,OAAb,CAAqBN,MAArB,CADO,EAEP,4DAFO,EAGP,kEAHO,EAIP,2EAJO,EAMP,iEANO,EAOP,mEAPO,EAQP,+DARO,EASP,mEATO,EAUP,iEAVO,EAWP,mEAXO,EAYP,+EAZO,EAaP,sEAbO,CAFD;AAiBRF,iBAAO,EAAE,CAAC,4DAAD;AAjBD,S;AAmBmB,Q;;;;;;;;;;;;;;;;;;AC9C7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOaW,Y,GALb;AAAA;;AAME,WAAAC,WAAA,GAAc,KAAd;AACD,K;;;uBAFYD,Y;AAAY,K;;;YAAZA,Y;AAAY,+B;AAAA,e;AAAA,a;AAAA,wmB;AAAA;AAAA;ACPzB;;AACE;;AAA+E;AAAA;AAAA;;AAE7E;;AACE;;AACE;;AACA;;AAAI;;AAAS;;AACf;;AACF;;AACA;;AACE;;AACE;;AAAgC;;AAAI;;AACtC;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAA6B;AAAA;AAAA;;AAC3B;;AACF;;AACF;;AACF;;AAEA;;AACE;;AACE;;AACF;;AACF;;AACF;;AACF;;;;AA7BiF;;AAAA,mGAA6B,WAA7B,EAA6B,IAA7B;;AAQlC;;AAAA;;AAUV;;AAAA;;;;;;;;;sEDZxBA,Y,EAAY;cALxB,uDAKwB;eALd;AACTE,kBAAQ,EAAE,UADD;AAETC,qBAAW,EAAE,sBAFJ;AAGTC,mBAAS,EAAE,CAAC,sBAAD;AAHF,S;AAKc,Q;;;;;;;;;;;;;;;;;;AEPzB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAqBA,QAAMC,cAAc,GAAG,6DAAvB;AAGA,QAAMC,KAAK,GAAqBC,MAAM,CAACpB,IAAP,CAAYkB,cAAZ,EAA4BG,GAA5B,CAC9B,UAACC,GAAD;AAAA,aAASJ,cAAc,CAACI,GAAD,CAAvB;AAAA,KAD8B,CAAhC;AAIA,gFAAmB,kEAAnB;;QAkBaC,S;;;;;YAAAA,S;AAAS,kBAFR,2DAEQ;;;;yBAATA,S;AAAS,O;AAAA,iBAHT,CAAC;AAAEC,eAAO,EAAE,0DAAX;AAAoBC,gBAAQ,EAAE;AAA9B,OAAD,C;AAAuC,gBAXzC,CACP,uEADO,EAEP,oEAFO,EAGP,0EAHO,EAIP,mEAJO,EAKP,+DALO,EAMP,qEANO,EAOP,4FAPO,EAQP,iEAAaf,OAAb,CAAqBS,KAArB,CARO,EASP,mEATO,CAWyC;;;;0HAGvCI,S,EAAS;AAAA,uBAfL,2DAeK;AAfO,kBAEzB,uEAFyB,EAGzB,oEAHyB,EAIzB,0EAJyB,EAKzB,mEALyB,EAMzB,+DANyB,EAOzB,qEAPyB,EAQzB,4FARyB,EAQF,gEARE,EAUzB,mEAVyB;AAeP,O;AALN,K;;;;;sEAKHA,S,EAAS;cAhBrB,sDAgBqB;eAhBZ;AACRZ,sBAAY,EAAE,CAAC,2DAAD,CADN;AAERC,iBAAO,EAAE,CACP,uEADO,EAEP,oEAFO,EAGP,0EAHO,EAIP,mEAJO,EAKP,+DALO,EAMP,qEANO,EAOP,4FAPO,EAQP,iEAAaF,OAAb,CAAqBS,KAArB,CARO,EASP,mEATO,CAFD;AAaRO,mBAAS,EAAE,CAAC;AAAEF,mBAAO,EAAE,0DAAX;AAAoBC,oBAAQ,EAAE;AAA9B,WAAD,CAbH;AAcRE,mBAAS,EAAE,CAAC,2DAAD;AAdH,S;AAgBY,Q;;;;;;;;;;;;;;;;;;AC9CtB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAUaC,Y;;;;;YAAAA;;;;yBAAAA,Y;AAAY,O;AAAA,iBAHZ,CAAC,4EAAD,C;AAAsB,gBADxB,CAAC,4DAAD,CACwB;;;;0HAGtBA,Y,EAAY;AAAA,kBAJb,4DAIa;AAAA,O;AAJD,K;;;;;sEAIXA,Y,EAAY;cANxB,sDAMwB;eANf;AACRjB,sBAAY,EAAE,EADN;AAERC,iBAAO,EAAE,CAAC,4DAAD,CAFD;AAGRc,mBAAS,EAAE,CAAC,4EAAD,CAHH;AAIRxB,iBAAO,EAAE;AAJD,S;AAMe,Q;;;;;;;;;;;;;;;;;;ACVzB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAKa2B,oB;AACX,sCAAc;AAAA;AAAE;;;;4BAEY;AAC1B,iBAAO,iBAAP;AACD;;;4BAEwB;AACvB,iBAAO,GAAP;AACD;;;4BAE4B;AAC3B,iBAAO,CAAP;AACD;;;4BAEgB;AACf,iBAAO,gBAAP;AACD;;;;;;;uBAjBUA,oB;AAAoB,K;;;aAApBA,oB;AAAoB,eAApBA,oBAAoB,K;AAAA,kBAFnB;;;;;sEAEDA,oB,EAAoB;cAHhC,wDAGgC;eAHrB;AACVC,oBAAU,EAAE;AADF,S;AAGqB,Q;;;;;;;;;;;;;;;;;;;;ACLjC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAUA,QAAMX,KAAK,GAAG,CAAC,+EAAD,EAAkB,iFAAlB,EAAqC,gFAArC,EAAuD,2EAAvD,CAAd;;QASaY,mB;;;;;YAAAA;;;;yBAAAA,mB;AAAmB,O;AAAA,iBAJnB,CACT;AAAEP,eAAO,EAAE,2DAAX;AAAqBC,gBAAQ,EAAEN;AAA/B,OADS,C;AAEV,gBAJQ,CAAC,+DAAD,CAIR,EAHS,+DAGT;;;;0HAEUY,mB,EAAmB;AAAA,kBANpB,+DAMoB;AANR,kBACZ,+DADY;AAMQ,O;AALR,K;;;;;sEAKXA,mB,EAAmB;cAP/B,sDAO+B;eAPtB;AACRnB,iBAAO,EAAE,CAAC,+DAAD,CADD;AAERV,iBAAO,EAAE,CAAC,+DAAD,CAFD;AAGRwB,mBAAS,EAAE,CACT;AAAEF,mBAAO,EAAE,2DAAX;AAAqBC,oBAAQ,EAAEN;AAA/B,WADS;AAHH,S;AAOsB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACkB9B;;AACE;;AAA8C;;AAAI;;AAClD;;AACE;;AACE;;AACA;;AACA;;AACA;;AACA;;AACA;;AACF;;AACF;;AACF;;;;AAXiB;;AAAA;;AACE;;AAAA;;AAEkB;;AAAA;;AACA;;AAAA;;AACA;;AAAA;;AACA;;AAAA;;AACA;;AAAA;;AACA;;AAAA;;;;QChC1Ba,sB;AACX,sCACUC,EADV,EAEUC,EAFV,EAGUC,aAHV,EAIUC,IAJV,EAKUC,OALV,EAKmC;AAAA;;AAAA;;AAJzB,aAAAJ,EAAA,GAAAA,EAAA;AACA,aAAAC,EAAA,GAAAA,EAAA;AACA,aAAAC,aAAA,GAAAA,aAAA;AACA,aAAAC,IAAA,GAAAA,IAAA;AACA,aAAAC,OAAA,GAAAA,OAAA;AAoGV;;;;;AAIA,aAAAC,YAAA,GAAe,UAAOC,IAAP;AAAA,iBAA8C;AAAA;AAAA;AAAA;AAAA;AAAA;AACzC,2BAAMC,WAAW,CAACD,IAAD,CAAjB;;AADyC;AAC3D,yBAAKE,UADsD;AAG3D,yBAAKC,aAAL;AAH2D,qDAKpD,KALoD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA9C;AAAA,SAAf;AAvGI;;;;iDA0BmC;;;;;;;AAC7BC,8B,GAAe,KAAKR,a,CAApBQ,U;mCAEA,KAAKC,Y;sDACN,iB,wBAKA,oB;;;;;AAJH,2BAAM,iDAAaC,cAAb,CAA4BC,IAA5B,CAAiCH,UAAjC,CAAN;;;sDACO,IAAI,iEAAJ,CAAkC;AACvCI,mCAAa,EAAE,KAAKA;AADmB,qBAAlC,C;;;;AAIP,2BAAM,iDAAaC,gBAAb,CAA8BF,IAA9B,CAAmCH,UAAnC,CAAN;;;sDACO,IAAI,mEAAJ,CAAoC;AACzCM,+BAAS,EAAE,KAAKA,SADyB;AAEzCC,oCAAc,EAAE,KAAKH;AAFoB,qBAApC,C;;;;;;;;;;;;AAOZ;;;0CAEc;AACb,eAAKI,UAAL,GAAkB,KAAKjB,EAAL,CAAQkB,aAAR,CAAsBC,aAAtB,CAAoC,WAApC,CAAlB;AACA,eAAKC,MAAL,GAAc,KAAKpB,EAAL,CAAQkB,aAAR,CAAsBC,aAAtB,CAAoC,UAApC,CAAd;AACD;;;mCAEa;;;;;;;;0CAKR,KAAKlB,a,EAHPoB,qB,uBAAAA,qB,EACAC,kB,uBAAAA,kB,EACAC,sB,uBAAAA,sB;AAEF,yBAAKC,YAAL,GAAoB,KAAKzB,EAAL,CAAQ0B,KAAR,CAAc;AAChCC,8BAAQ,EAAE,CAAC,EAAD,CADsB;AAEhChB,kCAAY,EAAE,CAACW,qBAAD,CAFkB;AAGhCN,+BAAS,EAAE,CAACO,kBAAD,CAHqB;AAIhCT,mCAAa,EAAE,CAACU,sBAAD;AAJiB,qBAAd,CAApB;AAOA,yBAAKhB,UAAL,GAAkB,oBAAlB;;;;;;;;;AACD;;;qCAEe;;;;;;wBAST,KAAKmB,Q;;;;;AACR,yBAAKvB,OAAL,CAAawB,MAAb,CAAoB,SAApB,EAA+B,SAA/B;;;;;AAIF,2BAAM,KAAKC,kBAAL,CAAwB,KAAKF,QAA7B,CAAN;;;AAEA,yBAAKlB,aAAL;;;;;;;;;AACD;;;wCAEqB;;;;;;;mCACE,wC;mCACpB,KAAKS,U;;AACL,2BAAM,KAAKY,sBAAL,EAAN;;;;;AAFc,wCAAM,gBAAN;;;AAAVC,2B;AAKN,gFAAwB,KAAKV,MAA7B,EAAqC,KAAKH,UAA1C;AACA,qEAAac,cAAb,CACE,KAAKX,MADP,EAEE,0DAAsBU,OAAtB,EAA+B,KAAKb,UAApC,CAFF;;;;;;;;;AAID;;;2CAcwBe,G,EAAa;;;;;;;;AACrB,2BAAM,KAAK9B,IAAL,CAClB+B,GADkB,CACdD,GADc,EACT;AAAEE,kCAAY,EAAE;AAAhB,qBADS,EAElBC,SAFkB,EAAN;;;AAATC,0B;;AAIY,2BAAM9B,WAAW,CAAC8B,MAAD,CAAjB;;;AAAlB,yBAAK7B,U;AACL,yBAAKiB,YAAL,CAAkBa,UAAlB,CAA6B;AAAEX,8BAAQ,EAAE;AAAZ,qBAA7B;;;;;;;;;AACD;;;4BApHc;AACb,iBAAO,KAAKF,YAAL,CAAkBc,KAAlB,CAAwBZ,QAA/B;AACD;;;4BAEkB;AACjB,iBAAO,KAAKF,YAAL,CAAkBc,KAAlB,CAAwB5B,YAA/B;AACD;;;4BAEmB;AAClB,iBAAO,KAAKc,YAAL,CAAkBc,KAAlB,CAAwBzB,aAAxB,GAAwC,EAA/C;AACD;;;4BAEe;AACd,iBAAO,KAAKW,YAAL,CAAkBc,KAAlB,CAAwBvB,SAA/B;AACD;;;;;;;uBAvBUjB,sB,EAAsB,2H,EAAA,yH,EAAA,2J,EAAA,gI,EAAA,uI;AAAA,K;;;YAAtBA,sB;AAAsB,yC;AAAA,e;AAAA,c;AAAA,umC;AAAA;AAAA;ADdnC;;AACE;;AACE;;AACA;;AACF;;AAGA;;AACE;;AAA6C;;AAAI;;AACjD;;AACE;;AACE;;AACE;;AACF;;AACA;;AACE;;AAAiD;AAAA,mBAAS,IAAAyC,UAAA,EAAT;AAAqB,WAArB;;AAAuB;;AAAE;;AAC5E;;AACA;;AACE;;AACE;;AAAkB;;AAA+B;;AAAI;;AACvD;;AACF;;AACF;;AAEF;;AACF;;AAEA;;AACE;;AAAiD;;AAAK;;AACtD;;AACE;;AACE;;AACA;;AACF;;AACF;;AACF;;AAEA;;AAeA;;AACE;;AAAkD;;AAAK;;AACvD;;AACE;;AACF;;AACF;;AAEF;;;;AA3Dc;;AAES;;AAAA;;AAMJ;;AAAA;;AACE;;AAAA;;AASA;;AAAA,uGAA+B,kBAA/B,EAA+B,KAA/B;;AAUF;;AAAA;;AACE;;AAAA;;AAQL;;AAAA;;AAgBG;;AAAA;;AACE;;AAAA;;AACkC;;AAAA,+EAAW,OAAX,EAAW,EAAX,EAAW,QAAX,EAAW,CAAX;;;;;;;;;sECzC1CzC,sB,EAAsB;cALlC,uDAKkC;eALxB;AACTjB,kBAAQ,EAAE,oBADD;AAETC,qBAAW,EAAE,iCAFJ;AAGTC,mBAAS,EAAE,CAAC,iCAAD;AAHF,S;AAKwB,Q;;;;;;;;;;;;;;;AAgInC,QAAMuB,WAAW,GAAG,SAAdA,WAAc,CAACkC,IAAD,EAAe;AACjC,aAAO,IAAIhF,OAAJ,CAAoB,UAACC,OAAD,EAAUgF,MAAV,EAAqB;AAC9C,YAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACAD,cAAM,CAACE,aAAP,CAAqBJ,IAArB;;AACAE,cAAM,CAACG,MAAP,GAAgB,YAAM;AACpBpF,iBAAO,CAACiF,MAAM,CAACN,MAAR,CAAP;AACD,SAFD;;AAGAM,cAAM,CAACI,OAAP,GAAiB,YAAM;AACrBL,gBAAM,CAAC7E,KAAK,CAAC,oBAAD,CAAN,CAAN;AACD,SAFD;AAGD,OATM,CAAP;AAUD,KAXD;;;;;;;;;;;;;;;;;AC9IA;AAAA;;;AAAA;AAAA;AAAA,O,CAAA;AACA;AACA;;;AAEO,QAAMmF,WAAW,GAAG;AACzBC,gBAAU,EAAE;AADa,KAApB;AAIP;;;;;;;AAOA;;;;;;;;;;;;;;;;;ACfA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAQA,QAAI,sEAAYA,UAAhB,EAA4B;AAC1B;AACD;;AAED,gFAAwB,eAAxB,CACmB,yDADnB,WAES,UAACC,GAAD;AAAA,aAASC,OAAO,CAACC,KAAR,CAAcF,GAAd,CAAT;AAAA,KAFT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZA;;;;;;;;;;;;;;;ACAA;;;;;;;;;;;;;;;ACAA","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport { NzUploadModule } from 'ng-zorro-antd/upload';\nimport { NzInputModule } from 'ng-zorro-antd/input';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzSpaceModule } from 'ng-zorro-antd/space';\nimport { NzSelectModule } from 'ng-zorro-antd/select';\nimport { NzInputNumberModule } from 'ng-zorro-antd/input-number';\nimport { NzMessageModule } from 'ng-zorro-antd/message';\n\nimport { IconsProviderModule } from './icons-provider.module';\n\nimport { FaceDetectionComponent } from './pages/face-detection/face-detection.component';\n\nconst routes: Routes = [\n  { path: '', pathMatch: 'full', redirectTo: '/face_detection' },\n  {\n    path: 'face_detection',\n    component: FaceDetectionComponent,\n  },\n];\n\n@NgModule({\n  declarations: [FaceDetectionComponent],\n  imports: [\n    RouterModule.forRoot(routes),\n    CommonModule,\n    ReactiveFormsModule,\n    IconsProviderModule,\n\n    NzInputModule,\n    NzButtonModule,\n    NzFormModule,\n    NzUploadModule,\n    NzSpaceModule,\n    NzSelectModule,\n    NzInputNumberModule,\n    NzMessageModule,\n  ],\n  exports: [RouterModule],\n})\nexport class AppRoutingModule {}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.less']\n})\nexport class AppComponent {\n  isCollapsed = false;\n}\n","<nz-layout class=\"app-layout\">\n  <nz-sider class=\"menu-sidebar\" nzCollapsible nzWidth=\"256px\" nzBreakpoint=\"md\" [(nzCollapsed)]=\"isCollapsed\"\n    [nzTrigger]=\"null\">\n    <div class=\"sidebar-logo\">\n      <a href=\"https://ng.ant.design/\" target=\"_blank\">\n        <img src=\"https://ng.ant.design/assets/img/logo.svg\" alt=\"logo\" />\n        <h1>Simon Lab</h1>\n      </a>\n    </div>\n    <ul nz-menu nzTheme=\"dark\" nzMode=\"inline\" [nzInlineCollapsed]=\"isCollapsed\">\n      <li nz-menu-item nzIcon=\"dashboard\" nzMatchRouter>\n        <a routerLink=\"/face_detection\">人脸识别</a>\n      </li>\n    </ul>\n  </nz-sider>\n  <nz-layout>\n    <nz-header>\n      <div class=\"app-header\">\n        <span class=\"header-trigger\" (click)=\"isCollapsed = !isCollapsed\">\n          <i class=\"trigger\" nz-icon [nzType]=\"isCollapsed ? 'menu-unfold' : 'menu-fold'\"></i>\n        </span>\n      </div>\n    </nz-header>\n\n    <nz-content>\n      <div class=\"inner-content\">\n        <router-outlet></router-outlet>\n      </div>\n    </nz-content>\n  </nz-layout>\n</nz-layout>\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\nimport { AppRoutingModule } from './app-routing.module';\nimport { IconsProviderModule } from './icons-provider.module';\nimport { NzLayoutModule } from 'ng-zorro-antd/layout';\nimport { NzMenuModule } from 'ng-zorro-antd/menu';\nimport { HttpClientModule } from '@angular/common/http';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { NZ_I18N } from 'ng-zorro-antd/i18n';\nimport { zh_CN } from 'ng-zorro-antd/i18n';\nimport { registerLocaleData } from '@angular/common';\nimport zh from '@angular/common/locales/zh';\n\nimport { IconDefinition } from '@ant-design/icons-angular';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\n\nimport * as AllIcons from '@ant-design/icons-angular/icons';\nimport { ConfigModule } from './config/config.module';\n\nconst antDesignIcons = AllIcons as {\n  [key: string]: IconDefinition;\n};\nconst icons: IconDefinition[] = Object.keys(antDesignIcons).map(\n  (key) => antDesignIcons[key]\n);\n\nregisterLocaleData(zh);\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    IconsProviderModule,\n    NzLayoutModule,\n    NzMenuModule,\n    HttpClientModule,\n    BrowserAnimationsModule,\n    NzIconModule.forRoot(icons),\n    ConfigModule,\n  ],\n  providers: [{ provide: NZ_I18N, useValue: zh_CN }],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DefaultConfigService } from './default-config.service';\n\n@NgModule({\n  declarations: [],\n  imports: [CommonModule],\n  providers: [DefaultConfigService],\n  exports: [],\n})\nexport class ConfigModule {}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class DefaultConfigService {\n  constructor() {}\n\n  get DEFAULT_FACE_DETECTOR() {\n    return 'ssd_mobilenetv1';\n  }\n\n  get DEFAULT_INPUT_SIZE() {\n    return 160;\n  }\n\n  get DEFAULT_MIN_CONFIDENCE() {\n    return 5;\n  }\n\n  get MODELS_DIR() {\n    return '/assets/models';\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { NZ_ICONS, NzIconModule } from 'ng-zorro-antd/icon';\n\nimport {\n  MenuFoldOutline,\n  MenuUnfoldOutline,\n  FormOutline,\n  DashboardOutline\n} from '@ant-design/icons-angular/icons';\n\nconst icons = [MenuFoldOutline, MenuUnfoldOutline, DashboardOutline, FormOutline];\n\n@NgModule({\n  imports: [NzIconModule],\n  exports: [NzIconModule],\n  providers: [\n    { provide: NZ_ICONS, useValue: icons }\n  ]\n})\nexport class IconsProviderModule {\n}\n","<form nz-form [formGroup]=\"validateForm\" class=\"form\">\n  <div class=\"preview\">\n    <img id=\"inputImg\" [src]=\"previewUrl\" />\n    <canvas id=\"overlay\"></canvas>\n  </div>\n\n\n  <nz-form-item>\n    <nz-form-label [nzSpan]=\"4\" nzFor=\"imageUrl\">图片地址</nz-form-label>\n    <nz-form-control [nzSpan]=\"18\">\n      <nz-space>\n        <nz-space-item>\n          <input nz-input formControlName=\"imageUrl\" id=\"imageUrl\" />\n        </nz-space-item>\n        <nz-space-item>\n          <button nz-button nzType=\"primary\" type=\"submit\" (click)=\"submitForm()\">OK</button>\n        </nz-space-item>\n        <nz-space-item>\n          <nz-upload [nzBeforeUpload]=\"beforeUpload\" [nzShowUploadList]=\"false\">\n            <button nz-button><i nz-icon nzType=\"upload\"></i>选择图片</button>\n          </nz-upload>\n        </nz-space-item>\n      </nz-space>\n\n    </nz-form-control>\n  </nz-form-item>\n\n  <nz-form-item>\n    <nz-form-label [nzSpan]=\"4\" nzFor=\"faceDetector\">面部检测器</nz-form-label>\n    <nz-form-control [nzSpan]=\"14\">\n      <nz-select formControlName=\"faceDetector\" id=\"faceDetector\" class=\"full-width\">\n        <nz-option nzLabel=\"SSD Mobilenet V1\" nzValue=\"ssd_mobilenetv1\"></nz-option>\n        <nz-option nzLabel=\"Tiny Face Detector\" nzValue=\"tiny_face_detector\"></nz-option>\n      </nz-select>\n    </nz-form-control>\n  </nz-form-item>\n\n  <nz-form-item *ngIf=\"faceDetector==='tiny_face_detector'\">\n    <nz-form-label [nzSpan]=\"4\" nzFor=\"inputSize\">输入尺寸</nz-form-label>\n    <nz-form-control [nzSpan]=\"14\">\n      <nz-select formControlName=\"inputSize\" id=\"inputSize\" class=\"full-width\">\n        <nz-option nzLabel=\"160 x 160\" [nzValue]=\"160\"></nz-option>\n        <nz-option nzLabel=\"224 x 224\" [nzValue]=\"224\"></nz-option>\n        <nz-option nzLabel=\"320 x 320\" [nzValue]=\"320\"></nz-option>\n        <nz-option nzLabel=\"416 x 416\" [nzValue]=\"416\"></nz-option>\n        <nz-option nzLabel=\"512 x 512\" [nzValue]=\"512\"></nz-option>\n        <nz-option nzLabel=\"608 x 608\" [nzValue]=\"608\"></nz-option>\n      </nz-select>\n    </nz-form-control>\n  </nz-form-item>\n\n\n  <nz-form-item>\n    <nz-form-label [nzSpan]=\"4\" nzFor=\"minConfidence\">最小置信度</nz-form-label>\n    <nz-form-control [nzSpan]=\"14\">\n      <nz-input-number formControlName=\"minConfidence\" [nzMin]=\"1\" [nzMax]=\"10\" [nzStep]=\"1\"></nz-input-number>\n    </nz-form-control>\n  </nz-form-item>\n\n</form>\n","import { HttpClient } from '@angular/common/http';\nimport { Component, OnInit, ElementRef, AfterViewInit } from '@angular/core';\nimport { FormGroup, FormBuilder } from '@angular/forms';\n\nimport { UploadFile } from 'ng-zorro-antd/upload/ng-zorro-antd-upload';\nimport * as faceapi from 'face-api.js';\nimport { DefaultConfigService } from 'src/app/config/default-config.service';\nimport { NzMessageService } from 'ng-zorro-antd/message';\n\n@Component({\n  selector: 'app-face-detection',\n  templateUrl: './face-detection.component.html',\n  styleUrls: ['./face-detection.component.less'],\n})\nexport class FaceDetectionComponent implements OnInit, AfterViewInit {\n  constructor(\n    private fb: FormBuilder,\n    private el: ElementRef,\n    private defaultConfig: DefaultConfigService,\n    private http: HttpClient,\n    private message: NzMessageService\n  ) {}\n\n  get imageUrl() {\n    return this.validateForm.value.imageUrl;\n  }\n\n  get faceDetector() {\n    return this.validateForm.value.faceDetector;\n  }\n\n  get minConfidence() {\n    return this.validateForm.value.minConfidence / 10;\n  }\n\n  get inputSize() {\n    return this.validateForm.value.inputSize;\n  }\n\n  validateForm: FormGroup;\n\n  previewUrl: string;\n\n  // dom\n  inputImgEl: HTMLImageElement;\n  canvas: HTMLCanvasElement;\n\n  private async getCurrentFaceDetector() {\n    const { MODELS_DIR } = this.defaultConfig;\n\n    switch (this.faceDetector) {\n      case 'ssd_mobilenetv1':\n        await faceapi.nets.ssdMobilenetv1.load(MODELS_DIR);\n        return new faceapi.SsdMobilenetv1Options({\n          minConfidence: this.minConfidence,\n        });\n      case 'tiny_face_detector':\n        await faceapi.nets.tinyFaceDetector.load(MODELS_DIR);\n        return new faceapi.TinyFaceDetectorOptions({\n          inputSize: this.inputSize,\n          scoreThreshold: this.minConfidence,\n        });\n      default:\n        break;\n    }\n  }\n\n  ngAfterViewInit(): void {\n    this.inputImgEl = this.el.nativeElement.querySelector('#inputImg');\n    this.canvas = this.el.nativeElement.querySelector('#overlay');\n  }\n\n  async ngOnInit(): Promise<void> {\n    const {\n      DEFAULT_FACE_DETECTOR,\n      DEFAULT_INPUT_SIZE,\n      DEFAULT_MIN_CONFIDENCE,\n    } = this.defaultConfig;\n    this.validateForm = this.fb.group({\n      imageUrl: [''],\n      faceDetector: [DEFAULT_FACE_DETECTOR],\n      inputSize: [DEFAULT_INPUT_SIZE],\n      minConfidence: [DEFAULT_MIN_CONFIDENCE],\n    });\n\n    this.previewUrl = '/assets/img/p1.jpg';\n  }\n\n  async submitForm(): Promise<void> {\n    // for (const i in this.validateForm.controls) {\n    //   if (this.validateForm.controls.hasOwnProperty(i)) {\n    //     const element = this.validateForm.controls[i];\n    //     element.markAsDirty();\n    //     element.updateValueAndValidity();\n    //   }\n    // }\n\n    if (!this.imageUrl) {\n      this.message.create('warning', '请输入图片地址');\n      return;\n    }\n\n    await this.getImageFromOrigin(this.imageUrl);\n\n    this.updateResults();\n  }\n\n  async updateResults() {\n    const results = await faceapi.detectAllFaces(\n      this.inputImgEl,\n      await this.getCurrentFaceDetector()\n    );\n\n    faceapi.matchDimensions(this.canvas, this.inputImgEl);\n    faceapi.draw.drawDetections(\n      this.canvas,\n      faceapi.resizeResults(results, this.inputImgEl)\n    );\n  }\n\n  /**\n   * 上传图片\n   *\n   */\n  beforeUpload = async (file: UploadFile): Promise<boolean> => {\n    this.previewUrl = await blob2Base64(file);\n\n    this.updateResults();\n\n    return false;\n  };\n\n  async getImageFromOrigin(url: string) {\n    const result = await this.http\n      .get(url, { responseType: 'blob' })\n      .toPromise();\n\n    this.previewUrl = await blob2Base64(result);\n    this.validateForm.patchValue({ imageUrl: '' });\n  }\n}\n\nconst blob2Base64 = (blob: any) => {\n  return new Promise<string>((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(blob);\n    reader.onload = () => {\n      resolve(reader.result as string);\n    };\n    reader.onerror = () => {\n      reject(Error('[blob2Base64] 转换失败'));\n    };\n  });\n};\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport * as faceapi from 'face-api.js';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch((err) => console.error(err));\n","/* (ignored) */","/* (ignored) */","/* (ignored) */"]}